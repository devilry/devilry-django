<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">Ext.define('devilry.extjshelpers.DashGrid', {
    extend: 'Ext.Container',

    initComponent: function() {
        this.callParent(arguments);
        this.createStore();
        this.loadStore();
    },

    config: {
        noRecordsMessage: {}
    },

    createStore: function() {
        throw &quot;createStore must be implemented&quot;;
    },

    loadStore: function() {
        this.store.load({
            scope: this,
            callback: function(records, operation, success) {
                if(!success || records.length === 0) {
                    var args = {};
                    if(success) {
                        Ext.apply(args, this.noRecordsMessage);
                        Ext.apply(args, {msgcls: 'info'});
                    } else {
                        args = {
                            title: 'Error',
                            msg: &quot;Failed to load. Try re-loading the page.&quot;,
                            msgcls: 'error'
                        }
                    }
                    this.add({
                        xtype: 'box',
                        html: Ext.create('Ext.XTemplate',
                            '&lt;div class=&quot;section {msgcls}-small extravisible-small&quot;&gt;',
                            '   &lt;h1&gt;{title}&lt;/h1&gt;',
                            '   &lt;p&gt;{msg}&lt;/p&gt;',
                            '&lt;/div&gt;'
                        ).apply(args)
                    });
                } else {
                    this.createBody();
                }
            }
        });
    },

    createBody: function() {
    }
});
</pre>
</body>
</html>
